/*!
 * FilePondPluginFileEncode 2.1.14
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const M=function(){self.onmessage=o=>{E(o.data.message,i=>{self.postMessage({id:o.data.id,message:i})})};const E=(o,i)=>{const{file:r}=o,l=new FileReader;l.onloadend=()=>{i(l.result.replace("data:","").replace(/^.+,/,""))},l.readAsDataURL(r)}},O=({addFilter:E,utils:o})=>{const{Type:i,createWorker:r,createRoute:l,isFile:A}=o,t=({name:e,file:a})=>new Promise(d=>{const s=r(M);s.post({file:a},_=>{d({name:e,data:_}),s.terminate()})}),n=[];return E("DID_CREATE_ITEM",(e,{query:a})=>{a("GET_ALLOW_FILE_ENCODE")&&(e.extend("getFileEncodeBase64String",()=>n[e.id]&&n[e.id].data),e.extend("getFileEncodeDataURL",()=>n[e.id]&&`data:${e.fileType};base64,${n[e.id].data}`))}),E("SHOULD_PREPARE_OUTPUT",(e,{query:a})=>new Promise(d=>{d(a("GET_ALLOW_FILE_ENCODE"))})),E("COMPLETE_PREPARE_OUTPUT",(e,{item:a,query:d})=>new Promise(s=>{if(!d("GET_ALLOW_FILE_ENCODE")||!A(e)&&!Array.isArray(e))return s(e);n[a.id]={metadata:a.getMetadata(),data:null},Promise.all((e instanceof Blob?[{name:null,file:e}]:e).map(t)).then(_=>{n[a.id].data=e instanceof Blob?_[0].data:_,s(e)})})),E("CREATE_VIEW",e=>{const{is:a,view:d,query:s}=e;!a("file-wrapper")||!s("GET_ALLOW_FILE_ENCODE")||d.registerWriter(l({DID_PREPARE_OUTPUT:({root:_,action:L})=>{if(s("IS_ASYNC"))return;const I=s("GET_ITEM",L.id);if(!I)return;const u=n[I.id],g=u.metadata,p=u.data,S=JSON.stringify({id:I.id,name:I.file.name,type:I.file.type,size:I.file.size,metadata:g,data:p});_.ref.data?_.ref.data.value=S:_.dispatch("DID_DEFINE_VALUE",{id:I.id,value:S})},DID_REMOVE_ITEM:({action:_})=>{const L=s("GET_ITEM",_.id);L&&delete n[L.id]}}))}),{options:{allowFileEncode:[!0,i.BOOLEAN]}}},m=typeof window<"u"&&typeof window.document<"u";m&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:O}));/*!
 * FilePondPluginFileValidateSize 2.2.8
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const G=({addFilter:E,utils:o})=>{const{Type:i,replaceInString:r,toNaturalFileSize:l}=o;return E("ALLOW_HOPPER_ITEM",(A,{query:t})=>{if(!t("GET_ALLOW_FILE_SIZE_VALIDATION"))return!0;const n=t("GET_MAX_FILE_SIZE");if(n!==null&&A.size>n)return!1;const e=t("GET_MIN_FILE_SIZE");return!(e!==null&&A.size<e)}),E("LOAD_FILE",(A,{query:t})=>new Promise((n,e)=>{if(!t("GET_ALLOW_FILE_SIZE_VALIDATION"))return n(A);const a=t("GET_FILE_VALIDATE_SIZE_FILTER");if(a&&!a(A))return n(A);const d=t("GET_MAX_FILE_SIZE");if(d!==null&&A.size>d){e({status:{main:t("GET_LABEL_MAX_FILE_SIZE_EXCEEDED"),sub:r(t("GET_LABEL_MAX_FILE_SIZE"),{filesize:l(d,".",t("GET_FILE_SIZE_BASE"),t("GET_FILE_SIZE_LABELS",t))})}});return}const s=t("GET_MIN_FILE_SIZE");if(s!==null&&A.size<s){e({status:{main:t("GET_LABEL_MIN_FILE_SIZE_EXCEEDED"),sub:r(t("GET_LABEL_MIN_FILE_SIZE"),{filesize:l(s,".",t("GET_FILE_SIZE_BASE"),t("GET_FILE_SIZE_LABELS",t))})}});return}const _=t("GET_MAX_TOTAL_FILE_SIZE");if(_!==null&&t("GET_ACTIVE_ITEMS").reduce((I,u)=>I+u.fileSize,0)>_){e({status:{main:t("GET_LABEL_MAX_TOTAL_FILE_SIZE_EXCEEDED"),sub:r(t("GET_LABEL_MAX_TOTAL_FILE_SIZE"),{filesize:l(_,".",t("GET_FILE_SIZE_BASE"),t("GET_FILE_SIZE_LABELS",t))})}});return}n(A)})),{options:{allowFileSizeValidation:[!0,i.BOOLEAN],maxFileSize:[null,i.INT],minFileSize:[null,i.INT],maxTotalFileSize:[null,i.INT],fileValidateSizeFilter:[null,i.FUNCTION],labelMinFileSizeExceeded:["File is too small",i.STRING],labelMinFileSize:["Minimum file size is {filesize}",i.STRING],labelMaxFileSizeExceeded:["File is too large",i.STRING],labelMaxFileSize:["Maximum file size is {filesize}",i.STRING],labelMaxTotalFileSizeExceeded:["Maximum total size exceeded",i.STRING],labelMaxTotalFileSize:["Maximum total file size is {filesize}",i.STRING]}}},z=typeof window<"u"&&typeof window.document<"u";z&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:G}));/*!
 * FilePondPluginImageExifOrientation 1.0.11
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const B=E=>/^image\/jpeg/.test(E.type),c={JPEG:65496,APP1:65505,EXIF:1165519206,TIFF:18761,Orientation:274,Unknown:65280},T=(E,o,i=!1)=>E.getUint16(o,i),F=(E,o,i=!1)=>E.getUint32(o,i),D=E=>new Promise((o,i)=>{const r=new FileReader;r.onload=function(l){const A=new DataView(l.target.result);if(T(A,0)!==c.JPEG){o(-1);return}const t=A.byteLength;let n=2;for(;n<t;){const e=T(A,n);if(n+=2,e===c.APP1){if(F(A,n+=2)!==c.EXIF)break;const a=T(A,n+=6)===c.TIFF;n+=F(A,n+4,a);const d=T(A,n,a);n+=2;for(let s=0;s<d;s++)if(T(A,n+s*12,a)===c.Orientation){o(T(A,n+s*12+8,a));return}}else{if((e&c.Unknown)!==c.Unknown)break;n+=T(A,n)}}o(-1)},r.readAsArrayBuffer(E.slice(0,64*1024))}),P=typeof window<"u"&&typeof window.document<"u",N=()=>P,R="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=";let w;const f=N()?new Image:{};f.onload=()=>w=f.naturalWidth>f.naturalHeight;f.src=R;const x=()=>w,Z=({addFilter:E,utils:o})=>{const{Type:i,isFile:r}=o;return E("DID_LOAD_ITEM",(l,{query:A})=>new Promise((t,n)=>{const e=l.file;if(!r(e)||!B(e)||!A("GET_ALLOW_IMAGE_EXIF_ORIENTATION")||!x())return t(l);D(e).then(a=>{l.setMetadata("exif",{orientation:a}),t(l)})})),{options:{allowImageExifOrientation:[!0,i.BOOLEAN]}}},C=typeof window<"u"&&typeof window.document<"u";C&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Z}));export{G as a,Z as b,O as p};
